{{ '//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js' | script_tag }}
{{ 'modelmeals.js' | asset_url | script_tag }}

<style>
.table>thead>tr>th, .table>tbody>tr>th, .table>tfoot>tr>th, .table>thead>tr>td, .table>tbody>tr>td, .table>tfoot>tr>td {
    vertical-align: middle;
    border-right:0;
    border-left: 0;
    border-bottom: 1px solid #ddd;
}

.input-group {float: right}
input[type="number"][disabled] {
  background-color: rgba(0,0,0,0.1);
}
.qty-row {border-bottom: 0; }
.table>thead>tr>th {border: 0}
.table>thead>tr>th>h1 {margin-bottom: 0}
.table>thead>tr>th.price {padding-left: 80px}
h4#display-main-options-qty {margin-top: 0}
.table>thead>tr>th.caption {padding-top: 0}
#main-dish-table {border-top: none}
.display-qty {font-size: 16px}
.table>thead>tr>th.collection-qty {text-align: right; padding-right: 72px;}
.table-inputs {text-align: right;}
input[type="number"], select {display: inline;}
a {color: black}
.table-img {width: 80px}
.quantity { text-align: center; width: 60px !important; margin: 0 !important; }
.thumbnail {margin-bottom:6px;}

.carousel-control.left,.carousel-control.right{
  background-image:none;
  margin-top:10%;
  width:5%;
}

.add-to-cart-order-form:hover {
  color: white;
}
.add-to-cart-button {
  float: right;
  width: 144px;
  margin-right: 8px;
}
.form-control {height: 37px;}
.order-form-inputs {width: 144px}
.product-price {
  text-align: center;
  width: 90.1563px;
}
.subscribe.btn-secondary {
  color: black;
  background-color: white;
  border-color: black;
}
.subscribe-btn {
  width: 110px;
}

input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

</style>



<!-- Modal -->
<div class="modal fade" id="modal-gallery" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
          <button class="close" type="button" data-dismiss="modal">Ã—</button>
          <h3 class="modal-title"></h3>
      </div>
      <div class="modal-body"></div>
      <div class="modal-footer">
          <button class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal End -->


<div class="container">
  <img class="center-block" src="//cdn.shopify.com/s/files/1/1182/1150/files/menu_fb348d82-a3a8-440a-8cbc-e61656153ac8_2048x2048.jpeg?16444708026538729962" alt="">
</div>



<div class="container">
<!-- Package Options -->
{% assign collection = collections.package-options %}
{% if collection.products_count > 0 %}
  <table class="table">
    <thead>
      <tr class="qty-row">
        <th colspan="2"><h1>{{ collection.title }}</h1></th>
        {% if collection.handle == 'package-options' %}
          <th colspan="2" class="price">Price</th>
          <th class="collection-qty">Qty</th>
        {% endif %}
      </tr>
      {% if collection.handle == 'main-dish-options' or collection.handle == 'side-dish-options' %}
        <tr>
          <th colspan="4" class="display" id="display-{{ collection.handle }}"></th>
        </tr>
      {% endif %}
    </thead>
    <tbody>
      {% for product in collection.products %}
        {% if product.available %}
          {% for variant in product.variants %}
            {% if variant.available %}
              <tr>
                {% if product.featured_image %}
                  <td class="table-img">
                    <a href="#image{{ product.id }}">
                      <img src="{{ product.featured_image.src | product_img_url: 'thumb' }}" id="image{{ product.id }}" alt="{{ product.featured_image.alt | escape }}" class="modal-img" data-collection="{{ collection.id }}"/>
                    </a>
                  </td>
                {% endif %}
                <td colspan="{% if product.featured_image and product.price > 0 %}1{% elsif product.price == 0 %}2{% else %}4{% endif %}">
                  <a href="#image{{ product.id }}" class="modal-description" data-title="{{ product.title }}" data-description="{{ product.description | strip_html }}">
                   {{ product.title }}
                  </a>
                </td>
                {% if product.price > 0 %}
                  <td class="product-price" id="price{{ variant.id }}">
                    {{ product.price | money }}
                  </td>
                  <td>
                    <div class="subscribe-btn">
                      <button type="button" class="btn btn-default subscribe" data-product="{{ product.id }}" data-variant="{{ variant.id }}" data-subscriptionvariant="{{ variant.metafields.subscriptions.discount_variant_id }}" data-regularprice="{{ product.price }}" data-subscriptionprice="{{ variant.metafields.subscriptions.discount_variant_price }}">Subscribe</button>
                    </div>
                  </td>
                {% endif %}
                <td class="table-inputs">
                  <div class="input-group order-form-inputs">
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-default btn-number" data-type="minus" data-field="{{ variant.id }}">
                        <span class="glyphicon glyphicon-minus"></span>
                      </button>
                    </span>
                    <input type="number" name="{{ variant.id }}" class="form-control input-number text-center {{ collection.handle }}" id="{{ variant.id }}" data-product="{{ product.title }}" data-id="{{ variant.id }}" data-subscribeid="{{ variant.metafields.subscriptions.discount_variant_id }}" value="">
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-default btn-number" data-type="plus" data-field="{{ variant.id }}">
                        <span class="glyphicon glyphicon-plus"></span>
                      </button>
                    </span>
                  </div>
                </td>
              </tr>
              <!-- Image Repo -->
              <div class="hidden" id="img-repo{{ collection.id }}" name="{{ product.id }}">
                {% for image in product.images %}
                  <div class="item" id="image{{ product.id }}">
                    <img class="center-block img-responsive" title="{{ product.title }}" src="{{ image.src | img_url: 'grande' }}" alt="{{ image.alt | escape }}">
                  </div>
                {% endfor %}
              </div>
              <!-- Image Repo End -->
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>There are no products in this view.</p>
{% endif %}
<!-- Package Options End -->


<!-- Main Dish Options -->
{% assign collection = collections.main-dish-options %}
{% if collection.products_count > 0 %}
  <table class="table">
    <thead>
      <tr class="qty-row">
        <th colspan="2"><h1>{{ collection.title }}</h1></th>
        {% if collection.handle == 'package-options' %}
          <th colspan="2" class="price">Price</th>
          <th class="collection-qty">Qty</th>
        {% endif %}
      </tr>
      {% if collection.handle == 'main-dish-options' or collection.handle == 'side-dish-options' %}
        <tr>
          <th colspan="4" class="display" id="display-{{ collection.handle }}"></th>
        </tr>
      {% endif %}
    </thead>
    <tbody>
      {% for product in collection.products %}
        {% if product.available %}
          {% for variant in product.variants %}
            {% if variant.available %}
              <tr>
                {% if product.featured_image %}
                  <td class="table-img">
                    <a href="#image{{ product.id }}">
                      <img src="{{ product.featured_image.src | product_img_url: 'thumb' }}" id="image{{ product.id }}" alt="{{ product.featured_image.alt | escape }}" class="modal-img" data-collection="{{ collection.id }}"/>
                    </a>
                  </td>
                {% endif %}
                <td colspan="{% if product.featured_image and product.price > 0 %}1{% elsif product.price == 0 %}2{% else %}4{% endif %}">
                  <a href="#image{{ product.id }}" class="modal-description" data-title="{{ product.title }}" data-description="{{ product.description | strip_html }}">
                   {{ product.title }}
                  </a>
                </td>
                {% if product.price > 0 %}
                  <td class="product-price" id="price{{ variant.id }}">
                    {{ product.price | money }}
                  </td>
                  <td>
                    <div class="subscribe-btn">
                      <button type="button" class="btn btn-default subscribe" data-product="{{ product.id }}" data-variant="{{ variant.id }}" data-subscriptionvariant="{{ variant.metafields.subscriptions.discount_variant_id }}" data-regularprice="{{ product.price }}" data-subscriptionprice="{{ variant.metafields.subscriptions.discount_variant_price }}">Subscribe</button>
                    </div>
                  </td>
                {% endif %}
                <td class="table-inputs">
                  <div class="input-group order-form-inputs">
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-default btn-number" data-type="minus" data-field="{{ variant.id }}">
                        <span class="glyphicon glyphicon-minus"></span>
                      </button>
                    </span>
                    <input type="number" name="{{ variant.id }}" class="form-control input-number text-center {{ collection.handle }}" id="{{ variant.id }}" data-product="{{ product.title }}" data-id="{{ variant.id }}" data-subscribeid="{{ variant.metafields.subscriptions.discount_variant_id }}" value="">
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-default btn-number" data-type="plus" data-field="{{ variant.id }}">
                        <span class="glyphicon glyphicon-plus"></span>
                      </button>
                    </span>
                  </div>
                </td>
              </tr>
              <!-- Image Repo -->
              <div class="hidden" id="img-repo{{ collection.id }}" name="{{ product.id }}">
                {% for image in product.images %}
                  <div class="item" id="image{{ product.id }}">
                    <img class="center-block img-responsive" title="{{ product.title }}" src="{{ image.src | img_url: 'grande' }}" alt="{{ image.alt | escape }}">
                  </div>
                {% endfor %}
              </div>
              <!-- Image Repo End -->
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>There are no products in this view.</p>
{% endif %}
<!-- Main Dish Options End -->



<!-- Side Dish Options -->
{% assign collection = collections.side-dish-options %}
{% if collection.products_count > 0 %}
  <table class="table">
    <thead>
      <tr class="qty-row">
        <th colspan="2"><h1>{{ collection.title }}</h1></th>
        {% if collection.handle == 'package-options' %}
          <th colspan="2" class="price">Price</th>
          <th class="collection-qty">Qty</th>
        {% endif %}
      </tr>
      {% if collection.handle == 'main-dish-options' or collection.handle == 'side-dish-options' %}
        <tr>
          <th colspan="4" class="display" id="display-{{ collection.handle }}"></th>
        </tr>
      {% endif %}
    </thead>
    <tbody>
      {% for product in collection.products %}
        {% if product.available %}
          {% for variant in product.variants %}
            {% if variant.available %}
              <tr>
                {% if product.featured_image %}
                  <td class="table-img">
                    <a href="#image{{ product.id }}">
                      <img src="{{ product.featured_image.src | product_img_url: 'thumb' }}" id="image{{ product.id }}" alt="{{ product.featured_image.alt | escape }}" class="modal-img" data-collection="{{ collection.id }}"/>
                    </a>
                  </td>
                {% endif %}
                <td colspan="{% if product.featured_image and product.price > 0 %}1{% elsif product.price == 0 %}2{% else %}4{% endif %}">
                  <a href="#image{{ product.id }}" class="modal-description" data-title="{{ product.title }}" data-description="{{ product.description | strip_html }}">
                   {{ product.title }}
                  </a>
                </td>
                {% if product.price > 0 %}
                  <td class="product-price" id="price{{ variant.id }}">
                    {{ product.price | money }}
                  </td>
                  <td>
                    <div class="subscribe-btn">
                      <button type="button" class="btn btn-default subscribe" data-product="{{ product.id }}" data-variant="{{ variant.id }}" data-subscriptionvariant="{{ variant.metafields.subscriptions.discount_variant_id }}" data-regularprice="{{ product.price }}" data-subscriptionprice="{{ variant.metafields.subscriptions.discount_variant_price }}">Subscribe</button>
                    </div>
                  </td>
                {% endif %}
                <td class="table-inputs">
                  <div class="input-group order-form-inputs">
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-default btn-number" data-type="minus" data-field="{{ variant.id }}">
                        <span class="glyphicon glyphicon-minus"></span>
                      </button>
                    </span>
                    <input type="number" name="{{ variant.id }}" class="form-control input-number text-center {{ collection.handle }}" id="{{ variant.id }}" data-product="{{ product.title }}" data-id="{{ variant.id }}" data-subscribeid="{{ variant.metafields.subscriptions.discount_variant_id }}" value="">
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-default btn-number" data-type="plus" data-field="{{ variant.id }}">
                        <span class="glyphicon glyphicon-plus"></span>
                      </button>
                    </span>
                  </div>
                </td>
              </tr>
              <!-- Image Repo -->
              <div class="hidden" id="img-repo{{ collection.id }}" name="{{ product.id }}">
                {% for image in product.images %}
                  <div class="item" id="image{{ product.id }}">
                    <img class="center-block img-responsive" title="{{ product.title }}" src="{{ image.src | img_url: 'grande' }}" alt="{{ image.alt | escape }}">
                  </div>
                {% endfor %}
              </div>
              <!-- Image Repo End -->
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>There are no products in this view.</p>
{% endif %}
<!-- Side Dish Options End -->



<!-- Add On Options -->
{% assign collection = collections.add-on-options %}
{% if collection.products_count > 0 %}
  <table class="table">
    <thead>
      <tr class="qty-row">
        <th colspan="2"><h1>{{ collection.title }}</h1></th>
        {% if collection.handle == 'package-options' %}
          <th colspan="2" class="price">Price</th>
          <th class="collection-qty">Qty</th>
        {% endif %}
      </tr>
      {% if collection.handle == 'main-dish-options' or collection.handle == 'side-dish-options' %}
        <tr>
          <th colspan="4" class="display" id="display-{{ collection.handle }}"></th>
        </tr>
      {% endif %}
    </thead>
    <tbody>
      {% for product in collection.products %}
        {% if product.available %}
          {% for variant in product.variants %}
            {% if variant.available %}
              <tr>
                {% if product.featured_image %}
                  <td class="table-img">
                    <a href="#image{{ product.id }}">
                      <img src="{{ product.featured_image.src | product_img_url: 'thumb' }}" id="image{{ product.id }}" alt="{{ product.featured_image.alt | escape }}" class="modal-img" data-collection="{{ collection.id }}"/>
                    </a>
                  </td>
                {% endif %}
                <td colspan="{% if product.featured_image and product.price > 0 %}1{% elsif product.price == 0 %}2{% else %}4{% endif %}">
                  <a href="#image{{ product.id }}" class="modal-description" data-title="{{ product.title }}" data-description="{{ product.description | strip_html }}">
                   {{ product.title }}
                  </a>
                </td>
                {% if product.price > 0 %}
                  <td class="product-price" id="price{{ variant.id }}">
                    {{ product.price | money }}
                  </td>
                  <td>
                    <div class="subscribe-btn">
                      <button type="button" class="btn btn-default subscribe" data-product="{{ product.id }}" data-variant="{{ variant.id }}" data-subscriptionvariant="{{ variant.metafields.subscriptions.discount_variant_id }}" data-regularprice="{{ product.price }}" data-subscriptionprice="{{ variant.metafields.subscriptions.discount_variant_price }}">Subscribe</button>
                    </div>
                  </td>
                {% endif %}
                <td class="table-inputs">
                  <div class="input-group order-form-inputs">
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-default btn-number" data-type="minus" data-field="{{ variant.id }}">
                        <span class="glyphicon glyphicon-minus"></span>
                      </button>
                    </span>
                    <input type="number" name="{{ variant.id }}" class="form-control input-number text-center {{ collection.handle }}" id="{{ variant.id }}" data-product="{{ product.title }}" data-id="{{ variant.id }}" data-subscribeid="{{ variant.metafields.subscriptions.discount_variant_id }}" value="">
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-default btn-number" data-type="plus" data-field="{{ variant.id }}">
                        <span class="glyphicon glyphicon-plus"></span>
                      </button>
                    </span>
                  </div>
                </td>
              </tr>
              <!-- Image Repo -->
              <div class="hidden" id="img-repo{{ collection.id }}" name="{{ product.id }}">
                {% for image in product.images %}
                  <div class="item" id="image{{ product.id }}">
                    <img class="center-block img-responsive" title="{{ product.title }}" src="{{ image.src | img_url: 'grande' }}" alt="{{ image.alt | escape }}">
                  </div>
                {% endfor %}
              </div>
              <!-- Image Repo End -->
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>There are no products in this view.</p>
{% endif %}
<!-- Add On Options End -->


<!-- Add to cart -->
<div class="row">
  <div class="col-md-12">
    <div class="add-to-cart-button">
      <button class="btn btn-block add-to-cart-order-form" id="add-to-cart-order-form" disabled/>ADD TO CART</button>
    </div>
  </div>
</div>
<!-- Add to cart end -->
</div>


<script>

  /* Ajax data from subscriptions page */
  var request = new XMLHttpRequest();

  request.addEventListener("load", function(event){
    let html = event.currentTarget.response
    let parser = new DOMParser();
    let domDoc = parser.parseFromString(html, "text/html");
    console.log(domDoc);
  }, false);

  request.open('GET', '/tools/recurring/customer/{{customer.metafields.subscriptions.customer_string}}/subscriptions/', true),
  request.send();
  /* Ajax data from subscriptions page end */

</script>
